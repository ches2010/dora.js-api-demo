# API Demo

[Dora.js](https://dorajs.com) 的示例扩展程序，在这里可以快速体验 Dora.js 的所有能力

## 基本信息

- **版本**：1.8.0
- **许可证**：MIT
- **作者**：linroid（Lin Zhang）
- **依赖环境**：Dora.js >= 1.8.0

## 主要功能

该示例扩展展示了 Dora.js 提供的各种能力，包括：

1. **组件展示**：提供了多种组件类型的示例，如 list、video、audio、article、image、webview、topTab、drawer、bottomTab 等，以及组件的嵌套使用。

2. **API 演示**：展示了 Dora.js 提供的各类 API，包括：
   - $ui：显示 Toast 消息、弹窗警告、打开浏览器等
   - $input：获取用户输入（文本、数字、密码等）、选择操作
   - $router：路由跳转
   - $prefs：配置相关操作
   - $storage：数据存储操作
   - $dora：扩展管理（安装、卸载、查询等）
   - 权限申请
   - 下载功能
   - 任务调度等

3. **文件系统操作**：展示了文件浏览相关功能。

4. **图标使用**：提供了图标展示和使用示例。

## 目录结构

- 核心配置文件：package.json、main.js
- 组件目录：components/（包含各类组件示例）
- 任务目录：tasks/（包含获取 IP 的任务示例）
- 资源目录：assets/（包含图标、图片等资源）
- 脚本目录：scripts/（包含相关脚本）
- 类型定义目录：components/types/（包含各类组件类型示例）

该仓库可作为开发者学习和使用 Dora.js 扩展开发的参考示例，帮助快速了解 Dora.js 的各项功能和使用方法。

### 1. 核心配置文件
- **`package.json`**  
  扩展的元信息配置文件，类似 npm 包的描述文件，用于定义扩展的基本属性，包括：  
  - 扩展名称（`name`）、显示名称（`displayName`）、版本（`version`）、作者、许可证等基础信息；  
  - 依赖声明（如依赖的 Dora.js 版本 `engines.dora`）；  
  - 入口文件指定（`main` 字段，通常指向 `main.js`）；  
  - 权限声明（`permissions`，如文件系统访问、网络请求等需要的权限）。  
  是 Dora.js 识别和加载扩展的核心配置。


- **`main.js`**  
  扩展的入口脚本，相当于程序的“主函数”，负责：  
  - 定义扩展的初始界面（通过 `$ui.render()` 渲染根组件）；  
  - 注册路由（`$router`），定义页面跳转规则；  
  - 初始化全局逻辑（如数据存储、事件监听等）；  
  是扩展启动时执行的第一个脚本，串联起整个扩展的功能。


### 2. 组件目录（`components/`）
存放各类 UI 组件示例，展示 Dora.js 支持的组件类型及用法，每个组件通常是一个独立的脚本文件，例如：  
- **`list.js`**：演示列表组件（`list`）的使用，包括下拉刷新、上拉加载、点击事件等；  
- **`webview.js`**：展示网页嵌入组件（`webview`），用于加载外部网页或本地 HTML；  
- **`modal.js`**：演示弹窗组件（`modal`），包括警告框、确认框等交互形式；  
- **`form.js`**：展示表单组件（`input`、`select` 等），用于收集用户输入；  
- 其他如 `video.js`（视频播放）、`audio.js`（音频播放）、`drawer.js`（侧边抽屉）等，覆盖 Dora.js 支持的所有组件类型，方便开发者参考具体用法。


### 3. 任务目录（`tasks/`）
存放“任务”脚本，演示 Dora.js 的异步任务调度能力（通过 `$task` API），例如：  
- **`getIp.js`**：示例任务，用于演示如何通过网络请求获取用户 IP 地址，展示异步操作、错误处理、任务状态管理等；  
任务通常用于执行耗时操作（如网络请求、文件处理），避免阻塞 UI 线程，提升扩展响应速度。


### 4. 资源目录（`assets/`）
存放扩展所需的静态资源，例如：  
- 图标文件（`icons/`）：用于界面展示的各类图标（如按钮图标、导航图标）；  
- 图片资源（`images/`）：示例中用到的图片素材，用于演示图片组件（`image`）的加载和显示；  
资源文件通过相对路径在组件或脚本中引用，是界面美化和功能演示的辅助文件。


### 5. 脚本目录（`scripts/`）
存放工具类或辅助脚本，用于封装通用逻辑，例如：  
- 可能包含数据格式化函数、权限检查工具、API 调用封装等；  
- 供其他组件或主脚本调用，避免代码重复，提升可维护性。


### 6. 类型定义目录（`components/types/`）
存放组件的类型定义（通常用于 TypeScript 类型提示，或作为文档说明），例如：  
- 定义列表项、表单字段等数据结构的类型；  
- 帮助开发者明确组件所需参数的格式和类型，减少开发错误。


这些文件和目录共同构成了一个完整的 Dora.js 扩展示例，覆盖了从配置、UI 渲染、API 调用到资源管理的全流程，开发者可通过阅读源码快速理解 Dora.js 的开发模式和能力边界。
